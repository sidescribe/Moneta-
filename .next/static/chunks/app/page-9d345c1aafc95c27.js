(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1311:(e,t,s)=>{"use strict";s.d(t,{default:()=>k});var a=s(5155),n=s(2115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,n.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:x,...u}=e;return(0,n.createElement)("svg",{ref:t,...i,width:a,height:a,stroke:s,strokeWidth:o?24*Number(r)/Number(a):r,className:l("lucide",c),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...x.map(e=>{let[t,s]=e;return(0,n.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let s=(0,n.forwardRef)((s,a)=>{let{className:i,...c}=s;return(0,n.createElement)(o,{ref:a,iconNode:t,className:l("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...c})});return s.displayName=r(e),s},d=c("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),x=c("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),u=c("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),m=c("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),g=c("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),p=c("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function h(){let[e,t]=(0,n.useState)(null),[s,r]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=e=>{e.preventDefault(),t(e),r(!0)},s=()=>{t(null),r(!1)};return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",s),"standalone"in window.navigator&&window.navigator.standalone&&r(!1),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",s)}},[]);let l=async()=>{if(!e)return;e.prompt();let{outcome:s}=await e.userChoice;"accepted"===s?console.log("User accepted the install prompt"):console.log("User dismissed the install prompt"),t(null),r(!1)};return s?(0,a.jsxs)("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(d,{className:"w-4 h-4"}),"Install App"]}):null}let b=(e,t)=>{let[s,a]=(0,n.useState)(()=>{try{let s=window.localStorage.getItem(e);return s?JSON.parse(s):t}catch(e){return t}});return(0,n.useEffect)(()=>{window.localStorage.setItem(e,JSON.stringify(s))},[e,s]),[s,a]},y=[{id:"1",name:"Owner Contribution",type:"income",businessRelevant:!0},{id:"2",name:"Revenue",type:"income",businessRelevant:!0},{id:"3",name:"Salary",type:"income",businessRelevant:!1},{id:"4",name:"Software/SaaS",type:"expense",businessRelevant:!0},{id:"5",name:"Hosting",type:"expense",businessRelevant:!0},{id:"6",name:"Marketing",type:"expense",businessRelevant:!0},{id:"7",name:"Office Supplies",type:"expense",businessRelevant:!0},{id:"8",name:"Travel",type:"expense",businessRelevant:!0},{id:"9",name:"Meals & Entertainment",type:"expense",businessRelevant:!0},{id:"10",name:"Professional Services",type:"expense",businessRelevant:!0},{id:"11",name:"Taxes & Licenses",type:"expense",businessRelevant:!0},{id:"12",name:"Groceries",type:"expense",businessRelevant:!1},{id:"13",name:"Rent/Mortgage",type:"expense",businessRelevant:!1},{id:"14",name:"Utilities",type:"expense",businessRelevant:!1},{id:"15",name:"Transportation",type:"expense",businessRelevant:!1},{id:"16",name:"Healthcare",type:"expense",businessRelevant:!1},{id:"17",name:"Entertainment",type:"expense",businessRelevant:!1}],v=[{id:"1",name:"Personal Checking",type:"checking",category:"personal",isActive:!0},{id:"2",name:"LLC Checking",type:"checking",category:"business",isActive:!0},{id:"3",name:"Credit Card",type:"credit_card",category:"personal",isActive:!0}];function j(e){let{personalAccounts:t,businessAccounts:s,getAccountBalance:n,metrics:r,saasMetrics:l,onAddTransaction:i}=e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Personal Accounts"}),(0,a.jsx)("div",{className:"space-y-3",children:t.map(e=>{let t=n(e.id);return(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.name}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",t.toFixed(2)]})]}),(0,a.jsx)(u,{className:"w-8 h-8 text-gray-400"})]})},e.id)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Business Accounts"}),(0,a.jsx)("div",{className:"space-y-3",children:s.map(e=>{let t=n(e.id);return(0,a.jsx)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.name}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",t.toFixed(2)]})]}),(0,a.jsx)(u,{className:"w-8 h-8 text-blue-400"})]})},e.id)})})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"This Month (Business)"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Income"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",r.income.toFixed(2)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Expenses"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:["$",r.expenses.toFixed(2)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Net"}),(0,a.jsxs)("p",{className:"text-2xl font-bold ".concat(r.net>=0?"text-green-600":"text-red-600"),children:["$",r.net.toFixed(2)]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"SaaS Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"MRR"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["$",l.mrr.toFixed(2)]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Monthly Recurring Revenue"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Fixed Costs"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:["$",l.fixedCosts.toFixed(2)]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"API + Hosting"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Tax Reserve"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-yellow-600",children:["$",l.taxReserve.toFixed(2)]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"30% of income"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Burn Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold ".concat(l.burnRateVsRevenue>50?"text-red-600":"text-green-600"),children:[l.burnRateVsRevenue.toFixed(0),"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Costs vs MRR"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Burn Rate Analysis"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Monthly Revenue (MRR)"}),(0,a.jsxs)("span",{className:"text-sm font-bold text-green-600",children:["$",l.mrr.toFixed(2)]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4",children:(0,a.jsx)("div",{className:"bg-green-500 h-4 rounded-full",style:{width:"100%"}})}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Fixed Costs (API + Hosting)"}),(0,a.jsxs)("span",{className:"text-sm font-bold text-red-600",children:["$",l.fixedCosts.toFixed(2)]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4",children:(0,a.jsx)("div",{className:"bg-red-500 h-4 rounded-full",style:{width:l.mrr>0?"".concat(Math.min(l.fixedCosts/l.mrr*100,100),"%"):"0%"}})}),(0,a.jsxs)("div",{className:"pt-2 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Net Monthly Cash Flow"}),(0,a.jsxs)("span",{className:"text-lg font-bold ".concat(l.mrr-l.fixedCosts>=0?"text-green-600":"text-red-600"),children:["$",(l.mrr-l.fixedCosts).toFixed(2)]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:l.burnRateVsRevenue>100?"⚠️ Burning cash faster than earning (".concat(l.burnRateVsRevenue.toFixed(0),"% of revenue)"):l.burnRateVsRevenue>50?"⚠️ High burn rate (".concat(l.burnRateVsRevenue.toFixed(0),"% of revenue)"):"✅ Healthy burn rate (".concat(l.burnRateVsRevenue.toFixed(0),"% of revenue)")})]})]})]}),(0,a.jsx)("button",{onClick:i,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg font-medium transition-colors",children:"Add Transaction"})]})}function f(e){let{transactions:t,accounts:s,categories:n,filterType:r,setFilterType:l,onAddTransaction:i,onEditTransaction:o,onDeleteTransaction:c}=e,d=[...t].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime());return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>l("all"),className:"px-4 py-2 rounded-lg text-sm transition-colors ".concat("all"===r?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),children:"All"}),(0,a.jsx)("button",{onClick:()=>l("personal"),className:"px-4 py-2 rounded-lg text-sm transition-colors ".concat("personal"===r?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),children:"Personal"}),(0,a.jsx)("button",{onClick:()=>l("business"),className:"px-4 py-2 rounded-lg text-sm transition-colors ".concat("business"===r?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),children:"Business"})]}),(0,a.jsxs)("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[(0,a.jsx)(x,{className:"w-4 h-4"}),"Add"]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 divide-y divide-gray-200",children:0===d.length?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No transactions yet. Add your first transaction to get started!"}):d.map(e=>{let t=s.find(t=>t.id===e.accountId),r=n.find(t=>t.id===e.categoryId);return(0,a.jsx)("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.description}),(0,a.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full ".concat("business"===e.type?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:e.type})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[new Date(e.date).toLocaleDateString()," • ",null==r?void 0:r.name," • ",null==t?void 0:t.name]}),e.notes&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.notes})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"text-right mr-4",children:(0,a.jsxs)("p",{className:"text-lg font-bold ".concat(e.amount>=0?"text-green-600":"text-red-600"),children:[e.amount>=0?"+":"-","$",Math.abs(e.amount).toFixed(2)]})}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("button",{onClick:()=>o(e),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200 hover:shadow-sm",title:"Edit transaction",children:(0,a.jsx)(m,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>c(e.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 hover:shadow-sm",title:"Delete transaction",children:(0,a.jsx)(g,{className:"w-4 h-4"})})]})]})]})},e.id)})})]})}function N(e){let{transactions:t,categories:s,metrics:n}=e,r=t.filter(e=>"business"===e.type&&e.amount<0),l={};r.forEach(e=>{let t=s.find(t=>t.id===e.categoryId),a=(null==t?void 0:t.name)||"Uncategorized";l[a]=(l[a]||0)+Math.abs(e.amount)});let i=Object.entries(l).sort((e,t)=>{let[,s]=e,[,a]=t;return a-s}).slice(0,5),o=Object.values(l).reduce((e,t)=>e+t,0);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:[new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})," - Business"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center py-3 border-b border-gray-200",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Income"}),(0,a.jsxs)("span",{className:"text-xl font-bold text-green-600",children:["$",n.income.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-3 border-b border-gray-200",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Expenses"}),(0,a.jsxs)("span",{className:"text-xl font-bold text-red-600",children:["-$",n.expenses.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-3 pt-4 border-t-2 border-gray-300",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:"Net Profit"}),(0,a.jsxs)("span",{className:"text-2xl font-bold ".concat(n.net>=0?"text-green-600":"text-red-600"),children:["$",n.net.toFixed(2)]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Expenses by Category"}),0===i.length?(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No expenses recorded yet"}):(0,a.jsx)("div",{className:"space-y-3",children:i.map(e=>{let[t,s]=e,n=s/o*100;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,a.jsx)("span",{className:"text-sm text-gray-700",children:t}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["$",s.toFixed(2)," (",n.toFixed(0),"%)"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:"".concat(n,"%")}})})]},t)})})]})]})}function w(e){var t;let{accounts:s,categories:r,onClose:l,onSave:i,transaction:o}=e,c=!!o,[d,x]=(0,n.useState)((null==o?void 0:o.accountId)||(null==(t=s[0])?void 0:t.id)||""),[u,m]=(0,n.useState)(o?new Date(o.date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0]),[g,h]=(0,n.useState)(o?Math.abs(o.amount).toString():""),[b,y]=(0,n.useState)(!o||o.amount<0),[v,j]=(0,n.useState)((null==o?void 0:o.categoryId)||""),[f,N]=(0,n.useState)((null==o?void 0:o.description)||""),[w,k]=(0,n.useState)((null==o?void 0:o.notes)||""),[C,S]=(0,n.useState)((null==o?void 0:o.subscriptionType)||"one-time"),[R,A]=(0,n.useState)((null==o?void 0:o.businessCategory)||""),D=s.find(e=>e.id===d),M=r.filter(e=>b?"expense"===e.type:"income"===e.type);return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:c?"Edit Transaction":"Add Transaction"}),(0,a.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(p,{className:"w-6 h-6"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account"}),(0,a.jsx)("select",{value:d,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:s.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.name," (",e.category,")"]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,a.jsx)("input",{type:"date",value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:g,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"}),(0,a.jsxs)("div",{className:"flex gap-4 mt-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",checked:!b,onChange:()=>{y(!1),j("")},className:"text-blue-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Income"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",checked:b,onChange:()=>{y(!0),j("")},className:"text-blue-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Expense"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,a.jsxs)("select",{value:v,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"Select a category"}),M.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),!b&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subscription Type"}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",checked:"one-time"===C,onChange:()=>S("one-time"),className:"text-blue-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"One-time"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"radio",checked:"recurring"===C,onChange:()=>S("recurring"),className:"text-blue-600"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Recurring"})]})]})]}),b&&(null==D?void 0:D.category)==="business"&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Category (for taxes)"}),(0,a.jsxs)("select",{value:R,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"",children:"Select business category"}),(0,a.jsx)("option",{value:"software",children:"Software & SaaS"}),(0,a.jsx)("option",{value:"legal",children:"Legal & Professional Services"}),(0,a.jsx)("option",{value:"marketing",children:"Marketing & Advertising"}),(0,a.jsx)("option",{value:"travel",children:"Travel & Transportation"}),(0,a.jsx)("option",{value:"office",children:"Office & Supplies"}),(0,a.jsx)("option",{value:"insurance",children:"Insurance"}),(0,a.jsx)("option",{value:"utilities",children:"Utilities & Communications"}),(0,a.jsx)("option",{value:"other",children:"Other Business Expenses"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("input",{type:"text",value:f,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., OpenAI API subscription"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (optional)"}),(0,a.jsx)("textarea",{value:w,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2,placeholder:"Additional details..."})]}),(null==D?void 0:D.category)==="business"&&(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,a.jsx)("p",{className:"text-sm text-yellow-800",children:"⚠️ Business transaction - Make sure this is appropriate for your LLC"})}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)("button",{onClick:l,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>{if(!d||!u||!g||!v||!f)return void alert("Please fill in all required fields");i({...o&&{id:o.id},accountId:d,date:new Date(u).toISOString(),amount:b?-Math.abs(parseFloat(g)):Math.abs(parseFloat(g)),categoryId:v,description:f,notes:w,type:(null==D?void 0:D.category)||"personal",subscriptionType:b?void 0:C,businessCategory:b&&(null==D?void 0:D.category)==="business"?R:void 0,createdAt:(null==o?void 0:o.createdAt)||Date.now()})},className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:c?"Update Transaction":"Save Transaction"})]})]})]})})}let k=function(){let[e]=b("accounts",v),[t,s]=b("transactions",[]),[r]=b("categories",y),[l,i]=(0,n.useState)(!1),[o,c]=(0,n.useState)(null),[u,m]=(0,n.useState)("dashboard"),[g,p]=(0,n.useState)("all"),k=e=>t.filter(t=>t.accountId===e).reduce((e,t)=>e+t.amount,0),C=(()=>{let e=new Date,s=new Date(e.getFullYear(),e.getMonth(),1),a=t.filter(e=>{let t=new Date(e.date);return"business"===e.type&&t>=s}),n=a.filter(e=>e.amount>0).reduce((e,t)=>e+t.amount,0),r=a.filter(e=>e.amount<0).reduce((e,t)=>e+Math.abs(t.amount),0);return{income:n,expenses:r,net:n-r}})(),S=(()=>{let e=t.filter(e=>"business"===e.type),s=e.filter(e=>e.amount>0&&"recurring"===e.subscriptionType).reduce((e,t)=>e+t.amount,0),a=e.filter(e=>e.amount>0).reduce((e,t)=>e+t.amount,0),n=["Software/SaaS","Hosting"],l=e.filter(e=>e.amount<0&&n.some(t=>{var s;return(null==(s=r.find(t=>t.id===e.categoryId))?void 0:s.name)===t})).reduce((e,t)=>e+Math.abs(t.amount),0);return{mrr:s,totalIncome:a,fixedCosts:l,taxReserve:.3*a,monthlyBurnRate:l,burnRateVsRevenue:l>0?l/s*100:0}})(),R=e.filter(e=>"personal"===e.category&&e.isActive),A=e.filter(e=>"business"===e.category&&e.isActive);return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\uD83D\uDCB0 Moneta"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{let s=new Blob([[["Date","Account","Account Type","Description","Category","Amount","Type","Notes"],...t.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).map(t=>{let s=e.find(e=>e.id===t.accountId),a=r.find(e=>e.id===t.categoryId);return[new Date(t.date).toISOString().split("T")[0],(null==s?void 0:s.name)||"",(null==s?void 0:s.category)||"",t.description,(null==a?void 0:a.name)||"",t.amount.toFixed(2),t.type,t.notes||""]})].map(e=>e.map(e=>'"'.concat(e.toString().replace(/"/g,'""'),'"')).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(s),n=document.createElement("a");n.href=a;let l=new Date().toISOString().split("T")[0];n.download="moneta-transactions-".concat(l,".csv"),n.click(),URL.revokeObjectURL(a),alert("Exported ".concat(t.length," transactions to CSV file."))},className:"flex items-center gap-2 px-4 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",title:"Export ".concat(t.length," transactions to CSV file"),children:[(0,a.jsx)(d,{className:"w-4 h-4"}),"Export CSV"]}),(0,a.jsxs)("button",{onClick:()=>{var s,a;let n=new Blob([JSON.stringify({metadata:{exportDate:new Date().toISOString(),version:"1.0",appName:"Moneta",totalTransactions:t.length,totalAccounts:e.length,totalCategories:r.length,dateRange:t.length>0?{earliest:t.reduce((e,t)=>t.date<e?t.date:e,null==(s=t[0])?void 0:s.date),latest:t.reduce((e,t)=>t.date>e?t.date:e,null==(a=t[0])?void 0:a.date)}:null},accounts:e.map(e=>({...e,balance:k(e.id)})),categories:r,transactions:t.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())},null,2)],{type:"application/json;charset=utf-8;"}),l=URL.createObjectURL(n),i=document.createElement("a");i.href=l;let o=new Date().toISOString().split("T")[0];i.download="moneta-full-backup-".concat(o,".json"),i.click(),URL.revokeObjectURL(l),alert("Exported complete accounting data (".concat(e.length," accounts, ").concat(r.length," categories, ").concat(t.length," transactions) to JSON file."))},className:"flex items-center gap-2 px-4 py-2 text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-lg transition-colors",title:"Export complete backup (accounts, categories, transactions)",children:[(0,a.jsx)(d,{className:"w-4 h-4"}),"Backup All Data"]}),(0,a.jsx)(h,{})]})]}),(0,a.jsxs)("div",{className:"flex gap-4 mt-4",children:[(0,a.jsx)("button",{onClick:()=>m("dashboard"),className:"px-4 py-2 rounded-lg transition-colors ".concat("dashboard"===u?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:"Dashboard"}),(0,a.jsx)("button",{onClick:()=>m("transactions"),className:"px-4 py-2 rounded-lg transition-colors ".concat("transactions"===u?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:"Transactions"}),(0,a.jsx)("button",{onClick:()=>m("reports"),className:"px-4 py-2 rounded-lg transition-colors ".concat("reports"===u?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:"Reports"})]})]})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:["dashboard"===u&&(0,a.jsx)(j,{personalAccounts:R,businessAccounts:A,getAccountBalance:k,metrics:C,saasMetrics:S,onAddTransaction:()=>i(!0)}),"transactions"===u&&(0,a.jsx)(f,{transactions:"all"===g?t:t.filter(e=>e.type===g),accounts:e,categories:r,filterType:g,setFilterType:p,onAddTransaction:()=>i(!0),onEditTransaction:e=>{c(e),i(!0)},onDeleteTransaction:a=>{let n=t.find(e=>e.id===a);if(!n)return;let l=e.find(e=>e.id===n.accountId);r.find(e=>e.id===n.categoryId);let i="Are you sure you want to delete this transaction?\n\n"+"Description: ".concat(n.description,"\n")+"Amount: ".concat(n.amount>=0?"+":"-","$").concat(Math.abs(n.amount).toFixed(2),"\n")+"Account: ".concat((null==l?void 0:l.name)||"Unknown","\n")+"Date: ".concat(new Date(n.date).toLocaleDateString(),"\n\n")+"This action cannot be undone.";window.confirm(i)&&s(t.filter(e=>e.id!==a))}}),"reports"===u&&(0,a.jsx)(N,{transactions:t,categories:r,metrics:C})]}),l&&(0,a.jsx)(w,{accounts:e,categories:r,onClose:()=>{i(!1),c(null)},onSave:o?e=>{s(t.map(t=>t.id===e.id?e:t)),c(null),i(!1)}:e=>{s([...t,{...e,id:Date.now().toString()}]),i(!1)},transaction:o}),(0,a.jsx)("button",{onClick:()=>i(!0),className:"fixed bottom-8 right-8 w-14 h-14 bg-blue-600 hover:bg-blue-700 text-white rounded-full shadow-lg flex items-center justify-center transition-colors",children:(0,a.jsx)(x,{className:"w-6 h-6"})})]})}},5570:(e,t,s)=>{Promise.resolve().then(s.bind(s,1311))}},e=>{e.O(0,[441,255,358],()=>e(e.s=5570)),_N_E=e.O()}]);